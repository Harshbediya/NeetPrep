<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard | NEET Study Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <!-- Ionicons for icons -->
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
</head>

<body>

    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="flex justify-between items-center" style="margin-bottom: 2rem;">
                <h2 style="margin:0;">NeetPrep<span style="color: var(--primary);">Hub</span></h2>
            </div>

            <nav>
                <div class="nav-item active" onclick="showSection('tasks')">
                    <ion-icon name="list-outline" style="margin-right: 12px; font-size: 1.2rem;"></ion-icon>
                    Today's Tasks
                </div>
                <div class="nav-item" onclick="showSection('topics')">
                    <ion-icon name="star-outline" style="margin-right: 12px; font-size: 1.2rem;"></ion-icon>
                    Important Topics
                </div>
                <div class="nav-item" onclick="showSection('syllabus')">
                    <ion-icon name="book-outline" style="margin-right: 12px; font-size: 1.2rem;"></ion-icon>
                    Syllabus
                </div>
                <div class="nav-item" onclick="showSection('papers')">
                    <ion-icon name="document-text-outline" style="margin-right: 12px; font-size: 1.2rem;"></ion-icon>
                    Past Papers
                </div>
                <div class="nav-item" onclick="showSection('tracker')">
                    <ion-icon name="bar-chart-outline" style="margin-right: 12px; font-size: 1.2rem;"></ion-icon>
                    Mock Tracker
                </div>
                <div class="nav-item" onclick="showSection('plan')">
                    <ion-icon name="calendar-outline" style="margin-right: 12px; font-size: 1.2rem;"></ion-icon>
                    Weekly Plan
                </div>
                <div class="nav-item" onclick="showSection('timer')">
                    <ion-icon name="timer-outline" style="margin-right: 12px; font-size: 1.2rem;"></ion-icon>
                    Focus Timer
                </div>
            </nav>

            <div style="margin-top: auto; padding-top: 2rem;">
                <a href="index.html" class="nav-item" style="color: #EF4444;">
                    <ion-icon name="log-out-outline" style="margin-right: 12px; font-size: 1.2rem;"></ion-icon>
                    Logout
                </a>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">

            <!-- SECTION: TASKS -->
            <div id="tasks-view" class="page-section active">
                <div class="top-message">
                    You do not need to study anything else today.
                </div>

                <div class="progress-section">
                    <div class="progress-header">
                        <span>Daily Progress</span>
                        <span id="progress-text">0%</span>
                    </div>
                    <div class="progress-track">
                        <div class="progress-fill" id="progress-bar"></div>
                    </div>
                </div>

                <div class="flex justify-between items-center" style="margin-bottom: 20px;">
                    <h3 style="font-weight: 600;">Current Tasks</h3>
                    <button class="btn btn-primary" onclick="openEditTaskModal()">
                        <ion-icon name="add-outline" style="margin-right: 5px;"></ion-icon> Add Task
                    </button>
                </div>

                <div id="task-list-container" class="task-list">
                    <!-- Tasks injected here -->
                </div>

                <div style="margin-top: 30px; text-align: center;">
                    <button class="btn btn-outline" onclick="resetDailyTasks()">
                        <ion-icon name="refresh-outline" style="margin-right: 5px;"></ion-icon> Reset All Tasks
                    </button>
                </div>
            </div>

            <!-- SECTION: TOPICS -->
            <div id="topics-view" class="page-section">
                <h2 style="margin-bottom: 1.5rem;">Most Important Topics (By Weightage)</h2>
                <div id="topics-container" class="topics-grid">
                    <!-- Topics injected here -->
                </div>
            </div>

            <!-- SECTION: SYLLABUS -->
            <div id="syllabus-view" class="page-section">
                <h2 style="margin-bottom: 1.5rem;">Official Syllabus (High Level)</h2>
                <div id="syllabus-container" class="topics-grid">
                    <!-- Syllabus injected here -->
                </div>
            </div>

            <!-- SECTION: PAPERS -->
            <div id="papers-view" class="page-section">
                <h2 style="margin-bottom: 1.5rem;">Past Year Papers (Real PDF Links)</h2>
                <div class="card">
                    <table class="tracker-table">
                        <thead>
                            <tr>
                                <th>Year</th>
                                <th>Paper Code</th>
                                <th>Resources</th>
                            </tr>
                        </thead>
                        <tbody id="papers-body">
                            <!-- Papers injected here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- SECTION: TRACKER -->
            <div id="tracker-view" class="page-section">
                <h2 style="margin-bottom: 1.5rem;">Mock Test Tracker</h2>

                <div class="card" style="margin-bottom: 2rem;">
                    <div class="flex gap-4 items-center" style="gap: 10px; flex-wrap: wrap;">
                        <input type="text" id="mock-name" placeholder="Test Name (e.g. Allen Major)" class="input-field"
                            style="flex: 2; min-width: 200px;">
                        <input type="number" id="mock-score" placeholder="Score (720)" class="input-field"
                            style="flex: 1; min-width: 100px;">
                        <input type="text" id="mock-weak" placeholder="Weak Topic" class="input-field"
                            style="flex: 2; min-width: 200px;">
                        <button class="btn btn-primary" onclick="addMockEntry()">Add Entry</button>
                    </div>
                </div>

                <div class="card" style="overflow-x: auto;">
                    <table class="tracker-table">
                        <thead>
                            <tr>
                                <th>Test</th>
                                <th>Date</th>
                                <th>Score</th>
                                <th>Weak Subject</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="tracker-body">
                            <!-- Tracker Data -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- SECTION: PLAN -->
            <div id="plan-view" class="page-section">
                <div class="flex justify-between items-center" style="margin-bottom: 1.5rem;">
                    <h2 style="margin:0;">Weekly Plan</h2>
                    <button class="btn btn-primary" onclick="openPlanEditor()">
                        <ion-icon name="create-outline" style="margin-right: 5px;"></ion-icon> Edit Plan
                    </button>
                </div>

                <div class="card" style="overflow-x: auto;">
                    <table class="tracker-table">
                        <thead>
                            <tr>
                                <th>Day</th>
                                <th>Subject 1</th>
                                <th>Subject 2</th>
                                <th>Work</th>
                            </tr>
                        </thead>
                        <tbody id="plan-body">
                            <!-- Plan injected here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- SECTION: TIMER -->
            <div id="timer-view" class="page-section text-center" style="max-width: 600px; margin: 0 auto;">
                <h2 style="margin-bottom: 2rem;">Deep Focus Timer</h2>

                <div class="card">
                    <div class="timer-display" id="timer">45:00</div>

                    <div class="flex justify-center gap-4">
                        <button class="btn btn-primary" onclick="startTimer()"
                            style="width: 120px; height: 48px;">Start</button>
                        <button class="btn btn-outline" onclick="resetTimer()"
                            style="width: 120px; height: 48px;">Reset</button>
                    </div>

                    <div class="quote-box" id="quote">
                        "Stop planning. Start solving."
                    </div>
                </div>
            </div>

            <!-- ---------------- MODALS ---------------- -->

            <!-- Resource Modal -->
            <div id="resource-modal" class="modal">
                <div class="card" style="width: 90%; max-width: 500px; padding: 30px;">
                    <div class="flex justify-between items-center" style="margin-bottom: 20px;">
                        <h3 id="modal-title">Resources</h3>
                        <button class="btn-icon-only" onclick="closeModal('resource-modal')"><ion-icon
                                name="close-outline"></ion-icon></button>
                    </div>
                    <div id="modal-content" class="flex flex-col gap-4">
                        <!-- Links go here -->
                    </div>
                </div>
            </div>

            <!-- Add/Edit Task Modal -->
            <div id="task-modal" class="modal">
                <div class="card" style="width: 90%; max-width: 500px; padding: 30px;">
                    <h3 style="margin-bottom: 20px;" id="task-modal-title">Add New Task</h3>
                    <form onsubmit="handleTaskSubmit(event)" id="task-form">
                        <input type="hidden" id="edit-task-id">

                        <div class="input-group">
                            <label>Subject</label>
                            <select id="task-subject" class="input-field">
                                <option value="Physics">Physics</option>
                                <option value="Chemistry">Chemistry</option>
                                <option value="Biology">Biology</option>
                            </select>
                        </div>

                        <div class="input-group">
                            <label>Topic Name</label>
                            <input type="text" id="task-topic" class="input-field" placeholder="e.g. Rotational Motion"
                                required>
                        </div>

                        <div class="flex gap-4">
                            <div class="input-group w-full">
                                <label>Time (min)</label>
                                <input type="number" id="task-time" class="input-field" value="60">
                            </div>
                            <div class="input-group w-full">
                                <label>Questions</label>
                                <input type="number" id="task-qs" class="input-field" value="30">
                            </div>
                        </div>

                        <div class="input-group">
                            <label>YouTube Video Link (Optional)</label>
                            <input type="url" id="task-video" class="input-field" placeholder="https://youtube.com/...">
                        </div>

                        <div class="input-group">
                            <label>Notes/Resource Link (Optional)</label>
                            <input type="url" id="task-resource" class="input-field" placeholder="https://...">
                        </div>

                        <div class="flex justify-between items-center mt-4">
                            <button type="button" class="btn btn-outline"
                                onclick="closeModal('task-modal')">Cancel</button>
                            <button type="submit" class="btn btn-primary">Save Task</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Edit Plan Modal -->
            <div id="plan-modal" class="modal">
                <div class="card"
                    style="width: 95%; max-width: 800px; padding: 30px; max-height: 90vh; overflow-y: auto;">
                    <div class="flex justify-between items-center" style="margin-bottom: 20px;">
                        <h3>Edit Weekly Plan</h3>
                        <button class="btn-icon-only" onclick="closeModal('plan-modal')"><ion-icon
                                name="close-outline"></ion-icon></button>
                    </div>

                    <form onsubmit="handlePlanSave(event)">
                        <table class="tracker-table" style="margin-bottom: 20px;">
                            <thead>
                                <tr>
                                    <th>Day</th>
                                    <th>Subject 1</th>
                                    <th>Subject 2</th>
                                    <th>Work</th>
                                </tr>
                            </thead>
                            <tbody id="plan-edit-body">
                                <!-- Inputs generated here -->
                            </tbody>
                        </table>
                        <div class="text-center">
                            <button type="submit" class="btn btn-primary w-full">Save Changes</button>
                        </div>
                    </form>
                </div>
            </div>

        </main>
    </div>

    <!-- Data Source -->
    <script src="data.js"></script>
    <!-- Script for Logic -->
    <script src="script.js"></script>
</body>

</html>